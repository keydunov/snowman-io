#!/bin/bash
cd $(dirname $0)

dest=../lib/snowman-io/api/public

echo Start Building UI
# build ember app
rm -fr $dest
ember build --environment=production --output-path=$dest

# create index.erb
cat $dest/index.html | sed 's/__SnowmanIO_VERSION__/<%= SnowmanIO::VERSION %>/g' > $dest/../views/index.erb
rm -f $dest/index.html 

# copy bootstrap for Sinatra
cp -r vendor/bootstrap-3.3.1 $dest/

# Add notification
echo -e This folder is build automatically by ./ui/release_new_ui script.\\n\
        DO NOT MODIFY IT MANUALLY! \
        > $dest/AUTO_GENERATED_FOLDER

echo Done.
